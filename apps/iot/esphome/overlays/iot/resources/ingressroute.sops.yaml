apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/compare-options: IgnoreExtraneous
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
        cert-manager.io/cluster-issuer: route53-letsencrypt-production
        external-dns.alpha.kubernetes.io/target: ENC[AES256_GCM,data:f8oG6kaZ7PZz3u8B+sBqZsmJ2B8VEA==,iv:FXWjz80krBSo0UH7K24sai/tkbiQK8U+lf18Xs62HaU=,tag:1di7Da0NkxEqmr5lo6Ed4w==,type:str]
        kubernetes.io/ingress.class: traefik-external
    labels:
        app.kubernetes.io/name: esphome
    name: esphome
    namespace: iot-k3s
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:2QSdjSxktTd1/2hA3alfu+fa5hS8hhvjjtTQLq76IIj4Ia2C/44=,iv:AfJw2D+hwtQrK6tFNiwzq0YDfbIScl3SuewTmiIwy08=,tag:MPuMa+6MBC+NbVe0mtZpKQ==,type:str]
          middlewares:
            - name: chain-traefik-dashboard
              namespace: traefik
          services:
            - kind: TraefikService
              name: esphome
              port: 6052
    tls:
        domains:
            - main: ENC[AES256_GCM,data:zVX4wNmt/cOgUT/yqTPjzbAnzR+6Lw==,iv:4sL3NFhVxpl0+rAJPAoDR7dcLiBZRp1WLToQHK2bxro=,tag:jTDaKhL4TVqaAghcA6WgDw==,type:str]
              sans:
                - ENC[AES256_GCM,data:DqLPB0wuGVK/ut2kxTYRZTdmBH1Pyio=,iv:8/4j8qewnABI2hQ8Ga4VylU5oG+C6ss0cvVv+hJzmFY=,tag:6RRUG3mInXFOkJvFOsl+5A==,type:str]
        options:
            name: tls-ver13
            namespace: traefik
        secretName: esphome-cf-production
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB6QjlYRUdjNzZ0V0laRWJW
            ckRQNHU0dUNDekI3RUtrb1hMaHZUTGZyTEZVCmFNbFUvSGpkcytuaEloblZBWlpT
            UWhLak9KV01jMDYvaDgzYXNIWTh2YVEKLS0tIGhXb1NxVUFRRUlpbWN0WDRQRlJy
            R2l5RUlzOWJkZzV4bUNPSGYyd0o3U0UKQtVMmfvkgdxPb77ZoZX6vJi5+9ZAEsGm
            nGAvK1xSXPX8j94IgzFtLetgWIVUYdJopOGngcO5CxO4/nw6AlWbRg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-21T23:49:09Z"
    mac: ENC[AES256_GCM,data:pv27lQJByQYdOnDlbjPaHxCQyyososckGVMwg1B8RSH5bsp8IJLfVM4g9phED8Duqg319pbyzJnEqrVUY8XwFg7Pb7JC33D1od1sicTnCUpvW07Cwv4zpRQ2W7IWRSvfn8vdDb83mvjDB4Civvj7Z7yYvJOa/JqKSnSS7MTmUc4=,iv:wFfGA6gvuNBaYaC/3xyAoqeurx2PAy8z9A6EbYgFj7s=,tag:zBgcA/7qyHcUCX3QO8EnMQ==,type:str]
    pgp:
        - created_at: "2024-06-21T23:49:09Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVARAAmYsxKcB/qB7kAADKNmp6PMjd7dyTeJ4EBMNniMljuO6w
            HlVhYwgVytvikDrasVOVGTW56tOJvryMLo2fwma5SJULEZXU64iqpldkuopHl5dU
            D/h2ykEJbas2SmPgBj09rqM6EkzN6nH+l2o6z5zyOZoaHsMXToOGrBMLp3zkhvTm
            BxIiWUx61ulGyz0rQkPcuFoubLc5qt1OMiBwNginQ7ywjTaSrDa/RkP8thCQQbV7
            cQgrdAI5TksPknTK0s3rkFj+t6ilvXWQkQdTG+qHKeOx1ndv8TF6EfLg9R5CoVkg
            YAZwrDuU4Fy6saUaGesgQAc8KALc2yzzXzz8NCGfWb4SAcDfhOEPTsi1OpePGX5a
            ISfn5emIt3a6us9nVHwwtw74ut+SF+hAFaR/sdH9ewecGHhOrZqVyDnWZSouYBXx
            sye/SdCXX1SDwzEpf7BJA5a3qseOAc9eJqon5qrCbXCXcGvS6H3CU3hjEY0al6xq
            a7fQGHff295n1+cScAWDKnovF/+Pqm20PXz1yWN+yxrXAgDPPRIzYxeemErIUe1M
            /zpxY13yejFItBqsd+odWhWycREbpTNdn/kQOhJaSt0ly7Ix88aEnNLq4v1r25dB
            sroevB7rdqYvASar8jQTGxP7LQ6DT2wMwbeh58UhFu+P1Jfk0LLqAGIOGtuOMfTS
            XAHDHuuKNhtNPivejkovl80yMtpf/dff7uPjQYbxbf/YY2wlmY4xafUHPRx2GLFX
            H3ODhHGBUULALGWzfry0XL/UbxfrrAXpQBenHQPsVEvPh8WaZ0iTG8A9QsnD
            =STKs
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
---
apiVersion: traefik.io/v1alpha1
kind: TraefikService
metadata:
    annotations:
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
    labels:
        app.kubernetes.io/name: esphome
    name: esphome
    namespace: argocd
spec:
    weighted:
        services:
            - name: esphome
              port: 6052
              weight: 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB6QjlYRUdjNzZ0V0laRWJW
            ckRQNHU0dUNDekI3RUtrb1hMaHZUTGZyTEZVCmFNbFUvSGpkcytuaEloblZBWlpT
            UWhLak9KV01jMDYvaDgzYXNIWTh2YVEKLS0tIGhXb1NxVUFRRUlpbWN0WDRQRlJy
            R2l5RUlzOWJkZzV4bUNPSGYyd0o3U0UKQtVMmfvkgdxPb77ZoZX6vJi5+9ZAEsGm
            nGAvK1xSXPX8j94IgzFtLetgWIVUYdJopOGngcO5CxO4/nw6AlWbRg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-21T23:49:09Z"
    mac: ENC[AES256_GCM,data:pv27lQJByQYdOnDlbjPaHxCQyyososckGVMwg1B8RSH5bsp8IJLfVM4g9phED8Duqg319pbyzJnEqrVUY8XwFg7Pb7JC33D1od1sicTnCUpvW07Cwv4zpRQ2W7IWRSvfn8vdDb83mvjDB4Civvj7Z7yYvJOa/JqKSnSS7MTmUc4=,iv:wFfGA6gvuNBaYaC/3xyAoqeurx2PAy8z9A6EbYgFj7s=,tag:zBgcA/7qyHcUCX3QO8EnMQ==,type:str]
    pgp:
        - created_at: "2024-06-21T23:49:09Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVARAAmYsxKcB/qB7kAADKNmp6PMjd7dyTeJ4EBMNniMljuO6w
            HlVhYwgVytvikDrasVOVGTW56tOJvryMLo2fwma5SJULEZXU64iqpldkuopHl5dU
            D/h2ykEJbas2SmPgBj09rqM6EkzN6nH+l2o6z5zyOZoaHsMXToOGrBMLp3zkhvTm
            BxIiWUx61ulGyz0rQkPcuFoubLc5qt1OMiBwNginQ7ywjTaSrDa/RkP8thCQQbV7
            cQgrdAI5TksPknTK0s3rkFj+t6ilvXWQkQdTG+qHKeOx1ndv8TF6EfLg9R5CoVkg
            YAZwrDuU4Fy6saUaGesgQAc8KALc2yzzXzz8NCGfWb4SAcDfhOEPTsi1OpePGX5a
            ISfn5emIt3a6us9nVHwwtw74ut+SF+hAFaR/sdH9ewecGHhOrZqVyDnWZSouYBXx
            sye/SdCXX1SDwzEpf7BJA5a3qseOAc9eJqon5qrCbXCXcGvS6H3CU3hjEY0al6xq
            a7fQGHff295n1+cScAWDKnovF/+Pqm20PXz1yWN+yxrXAgDPPRIzYxeemErIUe1M
            /zpxY13yejFItBqsd+odWhWycREbpTNdn/kQOhJaSt0ly7Ix88aEnNLq4v1r25dB
            sroevB7rdqYvASar8jQTGxP7LQ6DT2wMwbeh58UhFu+P1Jfk0LLqAGIOGtuOMfTS
            XAHDHuuKNhtNPivejkovl80yMtpf/dff7uPjQYbxbf/YY2wlmY4xafUHPRx2GLFX
            H3ODhHGBUULALGWzfry0XL/UbxfrrAXpQBenHQPsVEvPh8WaZ0iTG8A9QsnD
            =STKs
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
