apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/compare-options: IgnoreExtraneous
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
        cert-manager.io/cluster-issuer: route53-letsencrypt-staging
        external-dns.alpha.kubernetes.io/target: ENC[AES256_GCM,data:/V/LiUHdcwtNBbsGVwnnZnfhpTk//Q==,iv:6Wm6Jvwr5IAn2voAHvPTuLaz7oToeL/WgaNghfThnTI=,tag:Cxb337cpIxN/7VrAulg0xg==,type:str]
        kubernetes.io/ingress.class: traefik-external
    labels:
        app.kubernetes.io/name: esphome
    name: esphome
    namespace: iot
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:tIY+ITdz3wV9GtrAp0TMx8pmtZrX7HcMwFB9brm/8+3NyKWq70o=,iv:sTb8+kcNKnFqaZIHgWQX2Lh5NdqQzxOUgONl36MlG0g=,tag:cP0BInmyNwa+aM3I+lxzoQ==,type:str]
          middlewares:
            - name: chain-traefik-dashboard
              namespace: traefik
          services:
            - kind: TraefikService
              name: esphome
              port: 6052
    tls:
        domains:
            - main: ENC[AES256_GCM,data:ROkix3MvcHX/IyvCJalCpi5paktV0Q==,iv:3n/fpK6ahFR+PAa3IiEO/U2gf8NsDS07I+tTkj1PyWk=,tag:qBS4VCVD/vHouhpN3i+StA==,type:str]
              sans:
                - ENC[AES256_GCM,data:ahwC8USiQSlZQUganuK5uO+oSeMPTCk=,iv:f7i3TgFLCmkgW6Kp2NX5j3oWmNFwSWqrs7fc0jHklns=,tag:dCr+ImtFTd9KzJueRBkuhA==,type:str]
        options:
            name: tls-ver13
            namespace: traefik
        secretName: esphome-cf-staging
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBIWGliZlNtYlExQjFBVDFY
            d0d5RzFpRE5qSHBwbEp4bWpnMWhBekRpbkVvCmJrM3h5cVBVTTU4cVUveEZVRFlR
            WjBWc2dvZ3ltcHR2OWhkZHRwNUZuODgKLS0tIHdQVnI4VG9wTmhkdkFIOXJJSC95
            VnNFbW0xeWNhay9sdjBYYzZIb0tRNFkKwuWMe7pRJ4ezgHh4mDjva+2wRI6f2X0k
            2HLiNOrbwdVcB397bBVF+sTknbvOX4lR4prVAMVpPmQ4gM/UkSXFng==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-22T19:46:58Z"
    mac: ENC[AES256_GCM,data:r0BdU3lWEMiOdbGHx3Tws1mhmmDphvYkXxerdEkuY+NkogIjTbpWrKp5JAxCPiIVT2+/jq58Wsl2Z+UD6UadOxuuNHvFWa3XWQqAfz7qm1uqPE9NI6fFAc667tFJlFZ5ggl3BP8qz+NnwbDfLcFWgMJphYs8m+SW/ks6PHz/jzs=,iv:MSsgob/bYkH253lkN2LVMMhCanGYIiogccMuDrzX034=,tag:LbHn98s9vQyJeQI5T24B9A==,type:str]
    pgp:
        - created_at: "2024-06-22T19:46:58Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ/+OU1W4BUFiuxEcRTtuaeDjpiu9xKG6x9dRrsWcIAe7Itf
            xKAhmceM/WOZ/sHuL9sPqKWkq7L5g7E6OFOmF/Og4NjBWTZxRU0I7s6LtavjFFxE
            fpbKZhlfv0KGF6YLF1rl6HlqZU83bM9sK9K9iWYb+MVscAF5Ot7FBIBv3LowBLpV
            MveNsreFB4tajqq40z7TZnQ3aoeWK/1tuBkAO3DAq2WAypxbQGge/tcidbc8wk4U
            qUFJOcoKM79phuPOjGT6puF51PJpUZ55TdORwcYxdxg8KOCabFDSy4IUE/we2qIV
            D2MoLkLuoapESm1A1Kp4FNVRt0XlO4eU6JBCW3K5rRbWirTUGcBXvKVZaWBuaakw
            OIfcKY0Vw9aylq3cpnnRSOUrl8+YWn/yNNai5E+qLNPZvPg0VHkL5atpEnpc8Uh1
            1fwVjrzyCJ3GKGeaQqevqbwl/CHiCBklhC0uREoVlByqiiF3N71iW1ht5Irtaypi
            QwBpJaIOOP62xjLxUIduS+iWDxdy7kGUIKXZ6216C9s4gc/QtQbrcymtyyh1ohuu
            VnNjFdZIw84xTywDCN4Gq0GJo8kbGsPdI+ZS4/cpITYYB+yK0kkjV0sGZBkGBnKl
            urSx3oDYp8Z8KS5aqrN4AihhNwXW4m49VzXyCNlf6xaZcMwlpa9ZFZMgvVvQg3PS
            XAFJ8iZsfFDrdG8unBClgzvce3AeEc93l7glV1SaHJryGbw733LZcbTrr5keU3rK
            GkA1sUdSjMS6UKgGogu6tz68gqCevPRCClg7GBn1rr+AaWlXVNfs70DWNfqo
            =Na2Z
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
---
apiVersion: traefik.io/v1alpha1
kind: TraefikService
metadata:
    annotations:
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
    labels:
        app.kubernetes.io/name: esphome
    name: esphome
    namespace: argocd
spec:
    weighted:
        services:
            - name: esphome
              port: 6052
              weight: 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBIWGliZlNtYlExQjFBVDFY
            d0d5RzFpRE5qSHBwbEp4bWpnMWhBekRpbkVvCmJrM3h5cVBVTTU4cVUveEZVRFlR
            WjBWc2dvZ3ltcHR2OWhkZHRwNUZuODgKLS0tIHdQVnI4VG9wTmhkdkFIOXJJSC95
            VnNFbW0xeWNhay9sdjBYYzZIb0tRNFkKwuWMe7pRJ4ezgHh4mDjva+2wRI6f2X0k
            2HLiNOrbwdVcB397bBVF+sTknbvOX4lR4prVAMVpPmQ4gM/UkSXFng==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-22T19:46:58Z"
    mac: ENC[AES256_GCM,data:r0BdU3lWEMiOdbGHx3Tws1mhmmDphvYkXxerdEkuY+NkogIjTbpWrKp5JAxCPiIVT2+/jq58Wsl2Z+UD6UadOxuuNHvFWa3XWQqAfz7qm1uqPE9NI6fFAc667tFJlFZ5ggl3BP8qz+NnwbDfLcFWgMJphYs8m+SW/ks6PHz/jzs=,iv:MSsgob/bYkH253lkN2LVMMhCanGYIiogccMuDrzX034=,tag:LbHn98s9vQyJeQI5T24B9A==,type:str]
    pgp:
        - created_at: "2024-06-22T19:46:58Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ/+OU1W4BUFiuxEcRTtuaeDjpiu9xKG6x9dRrsWcIAe7Itf
            xKAhmceM/WOZ/sHuL9sPqKWkq7L5g7E6OFOmF/Og4NjBWTZxRU0I7s6LtavjFFxE
            fpbKZhlfv0KGF6YLF1rl6HlqZU83bM9sK9K9iWYb+MVscAF5Ot7FBIBv3LowBLpV
            MveNsreFB4tajqq40z7TZnQ3aoeWK/1tuBkAO3DAq2WAypxbQGge/tcidbc8wk4U
            qUFJOcoKM79phuPOjGT6puF51PJpUZ55TdORwcYxdxg8KOCabFDSy4IUE/we2qIV
            D2MoLkLuoapESm1A1Kp4FNVRt0XlO4eU6JBCW3K5rRbWirTUGcBXvKVZaWBuaakw
            OIfcKY0Vw9aylq3cpnnRSOUrl8+YWn/yNNai5E+qLNPZvPg0VHkL5atpEnpc8Uh1
            1fwVjrzyCJ3GKGeaQqevqbwl/CHiCBklhC0uREoVlByqiiF3N71iW1ht5Irtaypi
            QwBpJaIOOP62xjLxUIduS+iWDxdy7kGUIKXZ6216C9s4gc/QtQbrcymtyyh1ohuu
            VnNjFdZIw84xTywDCN4Gq0GJo8kbGsPdI+ZS4/cpITYYB+yK0kkjV0sGZBkGBnKl
            urSx3oDYp8Z8KS5aqrN4AihhNwXW4m49VzXyCNlf6xaZcMwlpa9ZFZMgvVvQg3PS
            XAFJ8iZsfFDrdG8unBClgzvce3AeEc93l7glV1SaHJryGbw733LZcbTrr5keU3rK
            GkA1sUdSjMS6UKgGogu6tz68gqCevPRCClg7GBn1rr+AaWlXVNfs70DWNfqo
            =Na2Z
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
