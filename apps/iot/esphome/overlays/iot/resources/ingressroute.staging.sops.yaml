apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/compare-options: IgnoreExtraneous
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
        cert-manager.io/cluster-issuer: route53-letsencrypt-staging
        external-dns.alpha.kubernetes.io/target: ENC[AES256_GCM,data:0VC/lbHUxA7Hlc7vVAfxubqM+Ly8Vg==,iv:mwSMKpQCsZM6RPO835494mfI+q7QfPfPMQuhFMjDMiQ=,tag:AnN+pRdcro/cM6AEtzus4w==,type:str]
        kubernetes.io/ingress.class: traefik-external
    labels:
        app.kubernetes.io/name: esphome
    name: esphome
    namespace: iot
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:FoTRfao9W+nwN/e0dsWtwrJ7xafBvRO9KWhJNVbUnlpEm6XtMcQ=,iv:rGbNxOkuNPiLtnOq2CcyDFsfTX/l2jxZS5vCb2wISDY=,tag:wbN8zjFNNIjb33skivdr/g==,type:str]
          middlewares:
            - name: chain-traefik-dashboard
              namespace: traefik
          services:
            - kind: TraefikService
              name: esphome
              port: 6052
    tls:
        domains:
            - main: ENC[AES256_GCM,data:NFhf4hh6aSYWGay0fmBZqBIjy9t4XQ==,iv:+wWldYrjWBgsT6Pytf7ktl0oGTm0MLZnYfhDKZijnPA=,tag:mwi/p0TQBkZWh0ufGG6tJw==,type:str]
              sans:
                - ENC[AES256_GCM,data:6T/dEmfsRpLW4pWGMZScAF3B+Y6n+y4=,iv:gz9qdRga5rWkOMBKlYa0nCcYPIPSA+ClJzwuCq132MI=,tag:qvglO+riEjtj7g/uJCsnwg==,type:str]
        options:
            name: tls-ver13
            namespace: traefik
        secretName: esphome-cf-staging
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBuSzBBY1djVjN3ZzJlU0Nv
            WUVQMEJBRkZjWDBrTzBZOG5SV0IxVkhTWkJBCmNKaDU5YjlEaGR4d2k0RW16bzRk
            SkN6QVZXNG1SeXFQdjU0UXBYK3hBeEUKLS0tIDdJcjU3VjA4Y1BHUkRmTWV5bzlR
            YlplcWoxazlwSUxHSzZ6bmN6MFJKZGcKYxHzXuDO3FiC9jgSnqYdX9bj8+bUAojq
            6V9+alSb+fGcN1HwwKI+eRJ+8xU2QeBjSI/iOqJgVQaHB+gXRvl1dg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-22T19:53:31Z"
    mac: ENC[AES256_GCM,data:6paj5c3oFR/2EPq1+qkZ5JxrbkxQ4L2Fcoe78vVxB3TAnHXO0x/zkN3NBFFgjUaH4S8P2CNC8gqG03UZj8j0a/r5cBFzuCnfdySuKjZVetwIcqqahDUudbUZ9wXWhfTShuFxE5SGcTFM+xteeeL28upZfGcwXwc1FkapjY0tnCc=,iv:irCyCjTxyPsIjkOmg0OUjaZ6T/KawVq00hnVF81LP4c=,tag:BYyV5MY4qJDq6H0ZLvgkuA==,type:str]
    pgp:
        - created_at: "2024-06-22T19:53:31Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVARAAskIpmw7c/oA8KrvQGMqH+o2bYNVhKaNIDNP8RYuoucnH
            kmg77wHl0xqnGvnOKrENvso4aEeLjIfeTm3Aal8veDW++D9aivXU6OEfJJEOAR37
            sEF13gg9mW9i0DK+kpHdISqGCuB7apNZPw2gBBJr0yUZQ8aChz+tResg2Os5Fjd+
            geN8TEiao1S4cAboevpiddPWmNLjZv5D6Rm1fxvSkFLuZZHpQaICeRezjT4fgjsP
            Fj46aVUDmHLzFQwX4PV4B3OCIjWivuoK300ALUMa8jBnHytJVq1BB/ewZW8SPBpg
            B5LTl4FAIZDM2T5oMRUhKZ/SV9eNUIsBU/dSu1gOzL3Il0MI0wELC2kUshWz5iG/
            6eSfA8+DYkBbIc5Yen85UGUcgND2mI1+i5Nrganfq7pai1Qtj/n4Qhkv8GGy1J4m
            XI0QJM87ZKgStVwKgHwIVbnrMPD5qmTJ0qFB6OpchLncZs2XazorYvCNXctPhk8U
            7AN7O/lCEAzFnmhLtiYLLprRciqtdkzenVhdsBoCT9ylMyR/owTs/HEwpbPwbKkw
            0Mot6jbqFPzYMElGhQ3mgjbJD+JpeEF7p3krH/ClKzjKnXjZW6qkA1ollJZSheG8
            9htIVPwHRIXWceNW1W9yJDmVgtDbn5i6yF/uH6R9Z82708S6uVVxiq+trPqQWFXS
            XAHhG3s8Dj2Cc6Rz43FSX2YjDSBb4G9ZAU9jb+oJC+pmXxwBUjpaCH0CwQMmOv5e
            CaVDaW2+4BzEXTeErAPCw55H02agXfxJ3mEyCjVFw9FxMVoD3aPQhQmijkik
            =Kr85
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
---
apiVersion: traefik.io/v1alpha1
kind: TraefikService
metadata:
    annotations:
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
    labels:
        app.kubernetes.io/name: esphome
    name: esphome
    namespace: argocd
spec:
    weighted:
        services:
            - name: esphome
              port: 6052
              weight: 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBuSzBBY1djVjN3ZzJlU0Nv
            WUVQMEJBRkZjWDBrTzBZOG5SV0IxVkhTWkJBCmNKaDU5YjlEaGR4d2k0RW16bzRk
            SkN6QVZXNG1SeXFQdjU0UXBYK3hBeEUKLS0tIDdJcjU3VjA4Y1BHUkRmTWV5bzlR
            YlplcWoxazlwSUxHSzZ6bmN6MFJKZGcKYxHzXuDO3FiC9jgSnqYdX9bj8+bUAojq
            6V9+alSb+fGcN1HwwKI+eRJ+8xU2QeBjSI/iOqJgVQaHB+gXRvl1dg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-22T19:53:31Z"
    mac: ENC[AES256_GCM,data:6paj5c3oFR/2EPq1+qkZ5JxrbkxQ4L2Fcoe78vVxB3TAnHXO0x/zkN3NBFFgjUaH4S8P2CNC8gqG03UZj8j0a/r5cBFzuCnfdySuKjZVetwIcqqahDUudbUZ9wXWhfTShuFxE5SGcTFM+xteeeL28upZfGcwXwc1FkapjY0tnCc=,iv:irCyCjTxyPsIjkOmg0OUjaZ6T/KawVq00hnVF81LP4c=,tag:BYyV5MY4qJDq6H0ZLvgkuA==,type:str]
    pgp:
        - created_at: "2024-06-22T19:53:31Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVARAAskIpmw7c/oA8KrvQGMqH+o2bYNVhKaNIDNP8RYuoucnH
            kmg77wHl0xqnGvnOKrENvso4aEeLjIfeTm3Aal8veDW++D9aivXU6OEfJJEOAR37
            sEF13gg9mW9i0DK+kpHdISqGCuB7apNZPw2gBBJr0yUZQ8aChz+tResg2Os5Fjd+
            geN8TEiao1S4cAboevpiddPWmNLjZv5D6Rm1fxvSkFLuZZHpQaICeRezjT4fgjsP
            Fj46aVUDmHLzFQwX4PV4B3OCIjWivuoK300ALUMa8jBnHytJVq1BB/ewZW8SPBpg
            B5LTl4FAIZDM2T5oMRUhKZ/SV9eNUIsBU/dSu1gOzL3Il0MI0wELC2kUshWz5iG/
            6eSfA8+DYkBbIc5Yen85UGUcgND2mI1+i5Nrganfq7pai1Qtj/n4Qhkv8GGy1J4m
            XI0QJM87ZKgStVwKgHwIVbnrMPD5qmTJ0qFB6OpchLncZs2XazorYvCNXctPhk8U
            7AN7O/lCEAzFnmhLtiYLLprRciqtdkzenVhdsBoCT9ylMyR/owTs/HEwpbPwbKkw
            0Mot6jbqFPzYMElGhQ3mgjbJD+JpeEF7p3krH/ClKzjKnXjZW6qkA1ollJZSheG8
            9htIVPwHRIXWceNW1W9yJDmVgtDbn5i6yF/uH6R9Z82708S6uVVxiq+trPqQWFXS
            XAHhG3s8Dj2Cc6Rz43FSX2YjDSBb4G9ZAU9jb+oJC+pmXxwBUjpaCH0CwQMmOv5e
            CaVDaW2+4BzEXTeErAPCw55H02agXfxJ3mEyCjVFw9FxMVoD3aPQhQmijkik
            =Kr85
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
