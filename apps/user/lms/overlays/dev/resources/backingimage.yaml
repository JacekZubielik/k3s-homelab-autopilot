# ---
# apiVersion: longhorn.io/v1beta2
# kind: BackingImage
# metadata:
#   finalizers:
#     - longhorn.io
#   annotations:
#     argocd.argoproj.io/hook: PreSync
#     argocd.argoproj.io/sync-wave: "-1"
#   name: pvc-lms-config
#   namespace: longhorn-system
# spec:
#   sourceType: restore
#   sourceParameters:
#       backup-url: "s3://k3s-longhorn-backup@us-east-1/?backingImage=pvc-lms-config"
#       concurrent-limit: "4"
#   checksum: 2103a0f871d5c724edb5b80b7c356925970e66fb290f33d5068cf04710679bbc10a79db52c6a5775411969e711a5a2b225c896602efa878adabc132903a301df

---
apiVersion: longhorn.io/v1beta2
kind: BackingImage
metadata:
  annotations:
    # argocd.argoproj.io/hook: PreSync
    argocd.argoproj.io/sync-wave: "-1"
  name: pvc-lms-config
  namespace: longhorn-system
spec:
  sourceType: export-from-volume
  sourceParameters:
    volume-name: pvc-lms-config
    export-type: qcow2

---
apiVersion: longhorn.io/v1beta2
kind: BackupBackingImage
metadata:
  finalizers:
    - longhorn.io
  annotations:
    # argocd.argoproj.io/sync-options: preserveResourcesOnDeletion=true
    # argocd.argoproj.io/hook: PostSync
    argocd.argoproj.io/sync-wave: "3"
  name: pvc-lms-config
  namespace: longhorn-system
spec:
  userCreated: true
  labels:
    usecase: test
    type: qcow2



# ---
# apiVersion: longhorn.io/v1beta2
# kind: BackupBackingImage
# metadata:
#   finalizers:
#     - longhorn.io
#   annotations:
#     argocd.argoproj.io/hook: PostSync
#     argocd.argoproj.io/sync-wave: "1"
#   name: pvc-lms-config
#   namespace: longhorn-system
# spec:
#   userCreated: false # true
#   labels:
#     usecase: test
#     type: qcow2
