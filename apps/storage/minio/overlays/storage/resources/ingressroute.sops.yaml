apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/compare-options: IgnoreExtraneous
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
        cert-manager.io/cluster-issuer: route53-letsencrypt-production
        external-dns.alpha.kubernetes.io/target: ENC[AES256_GCM,data:GhmeATgcS0OWEdjK7eoyYfk8TGhKkv7QBjg=,iv:Sdb2CIQKuCRixA2SB7dDJ7HyRKlAOeSgHqs/ZsUcNBI=,tag:N5tuRU6s3oINndsscxN7qg==,type:str]
        kubernetes.io/ingress.class: traefik-external
        ingress.kubernetes.io/ssl-passthrough: "true"
    name: minio-console-production
    namespace: minio
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:5ov4lJSS0TS0XEht+0Px0PvPVHOVkrye1/b578/5MULdMqZObeNY8Bj8TJFkj9k3nbVxPxlN5N7GeX5KchyQukx+,iv:ZMQE7ovahAQrpik01mVuRdubUcG54V0UXascDdHe5/Q=,tag:v39NXONk7IzfzvyC2WzRTQ==,type:str]
          #   middlewares:
          #     - name: rate-limit
          #       namespace: traefik
          services:
            - kind: TraefikService
              name: minio-console
              port: 9001
        - kind: Rule
          match: ENC[AES256_GCM,data:GudjVvzxiDzIaZVBXfDPPKfwtYSshNSmYfZzsYo1892QpI0A2w==,iv:fFekC37BIzct/M/2HAPM4paKfUg+sJbhtkoaAJ+LBQQ=,tag:fLHgHaN9D440fUPiCIqcKw==,type:str]
          priority: 2
          services:
            - kind: TraefikService
              name: minio
              port: 9000
    tls:
        domains:
            - main: ENC[AES256_GCM,data:IY1UsUSsENqE7Eon46dYo+OpeXjfr9Oc4zM=,iv:VSj+jkMH+3eWI4oj8x0RpJXhaDx3flZxSNp6uEaI7q8=,tag:1kXLJ8FPVff8/OiKvMh0JA==,type:str]
              sans:
                - ENC[AES256_GCM,data:oGUmcEaZKDJEMkaH+rtcMdZjiR+OfKdLmp69,iv:sp+krpZUVsEe7uWRFF6IycK39uNwhNZuuUdfxWtcb20=,tag:NCqABMJN8gQAzx6bOrM6Dg==,type:str]
        options:
            name: tls-ver13
            namespace: traefik
        secretName: minio-cf-production
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-06-28T13:16:14Z"
    mac: ENC[AES256_GCM,data:9F6kyDm+ipS8NNf1WdkYjMWo5akFWl0mJGCyGweDcPtkIQUdoqbDuyA42pxaNLsl4mHM3pgbVxMjL8vLTwphpYlKTTdSMT8s5BcoRbTI1HySRC8uZGWho4ala/QIfMWF5GRVvSdvEH1JYzhrQzHlwmap9QRbsXzcGsPpCrUFby8=,iv:Atn9gu85/5G55xv7Rho/n+bpNBh/2t2YGSzz4keLmSg=,tag:jZ/1AEM5QNPD2v6WromIFQ==,type:str]
    pgp:
        - created_at: "2024-06-28T12:46:44Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ//b4oOBTaNEnILvXbepcJzBrmmbWsb1ofPgOsDy7Mp9ZYR
            ID56djlKFloB1KObhnGWHQosa/kY+bTzGZR+mR6cmmQwtIuY+Jhz/y+v9vDS+dOM
            due4FTHsQeVd0xRrOn/sAb268sHFzYByv4eUnK5PBNJqZV6redOZ0ilJMdU3BKEG
            MZ+5QuR4jqkfJ5F0b8P1BzKiIfw6qsuPeNPOV2zW2nWyZTlStnrvZ4KJUvqjXbdV
            /209/mTH2YE6S4fUWXX/NKJ8Siln98tXDIBcovdjFnhlq/z3bft+xHVs5LCEvHYe
            aSWWeU+7nv+iCuv56E/T73p5w3JgcgwlmoShXSok4Y6c32DimhiJYorkYAbUn4+H
            mO6FmXjDxPLd4Kee2+rheBiyKwlk4seILYGpztpG+72SmHXrr2DXF+qQpicr9Oml
            dZ/lv1GqDExcqjGDTQ+fHsUbPJQtHYRoHb011HFy3WmzvK+ZcFQOu3XvmABzl7Gy
            ngJILjWh+bbCgpiDxcWqN7ne1zjvtM7IYRirdGO/t30N5t9lEWKhqhW2ZEfEm+Xq
            FagSGeJmKNfvfefSOJbyh3CDVUsApEleXMrpL7Z16VlxMH1ZlLhWiflRfwB5we9O
            NC+nQ5fdAySEOpkjgYd3HqP6GFxaOkNotWVs3wUcJx7v282+bbfyucs0eKOQNt3S
            XgFpeEgWNSBGBwi7vMcHJvoabDXYkLLCcKcass/MFOKSTRWvgvtWtPoNmqLG7C5y
            4L7W8ewMGLyDMZRl3jez9b6yYviWNcjb84kPxWBRaqJT48YA6B3k2iYnIySmeKM=
            =zCtj
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
---
apiVersion: traefik.io/v1alpha1
kind: TraefikService
metadata:
    annotations:
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
    name: minio-console
spec:
    weighted:
        services:
            - name: minio-console
              port: 9001
              weight: 1
# ---
# apiVersion: traefik.io/v1alpha1
# kind: IngressRouteTCP
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
#         argocd.argoproj.io/sync-wave: "10"
#         cert-manager.io/cluster-issuer: route53-letsencrypt-production
#         external-dns.alpha.kubernetes.io/target: storage.anotherlife.org.pl
#         kubernetes.io/ingress.class: traefik-external
#         ingress.kubernetes.io/ssl-passthrough: "true"
#     name: minio-production
#     namespace: minio
# spec:
#     entryPoints:
#         - websecure
#     routes:
#         - kind: Rule
#           match: HostSNI(`*`)
#           priority: 2
#           services:
#             - kind: TraefikService
#               name: minio
#               port: 9000
#     tls:
#         # domains:
#         #     - main: storage.anotherlife.org.pl
#         #       sans:
#         #         - .storage.anotherlife.org.pl
#         options:
#             name: tls-ver13
#             namespace: traefik
#         secretName: minio-cf-production
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-06-28T13:16:14Z"
    mac: ENC[AES256_GCM,data:9F6kyDm+ipS8NNf1WdkYjMWo5akFWl0mJGCyGweDcPtkIQUdoqbDuyA42pxaNLsl4mHM3pgbVxMjL8vLTwphpYlKTTdSMT8s5BcoRbTI1HySRC8uZGWho4ala/QIfMWF5GRVvSdvEH1JYzhrQzHlwmap9QRbsXzcGsPpCrUFby8=,iv:Atn9gu85/5G55xv7Rho/n+bpNBh/2t2YGSzz4keLmSg=,tag:jZ/1AEM5QNPD2v6WromIFQ==,type:str]
    pgp:
        - created_at: "2024-06-28T12:46:44Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ//b4oOBTaNEnILvXbepcJzBrmmbWsb1ofPgOsDy7Mp9ZYR
            ID56djlKFloB1KObhnGWHQosa/kY+bTzGZR+mR6cmmQwtIuY+Jhz/y+v9vDS+dOM
            due4FTHsQeVd0xRrOn/sAb268sHFzYByv4eUnK5PBNJqZV6redOZ0ilJMdU3BKEG
            MZ+5QuR4jqkfJ5F0b8P1BzKiIfw6qsuPeNPOV2zW2nWyZTlStnrvZ4KJUvqjXbdV
            /209/mTH2YE6S4fUWXX/NKJ8Siln98tXDIBcovdjFnhlq/z3bft+xHVs5LCEvHYe
            aSWWeU+7nv+iCuv56E/T73p5w3JgcgwlmoShXSok4Y6c32DimhiJYorkYAbUn4+H
            mO6FmXjDxPLd4Kee2+rheBiyKwlk4seILYGpztpG+72SmHXrr2DXF+qQpicr9Oml
            dZ/lv1GqDExcqjGDTQ+fHsUbPJQtHYRoHb011HFy3WmzvK+ZcFQOu3XvmABzl7Gy
            ngJILjWh+bbCgpiDxcWqN7ne1zjvtM7IYRirdGO/t30N5t9lEWKhqhW2ZEfEm+Xq
            FagSGeJmKNfvfefSOJbyh3CDVUsApEleXMrpL7Z16VlxMH1ZlLhWiflRfwB5we9O
            NC+nQ5fdAySEOpkjgYd3HqP6GFxaOkNotWVs3wUcJx7v282+bbfyucs0eKOQNt3S
            XgFpeEgWNSBGBwi7vMcHJvoabDXYkLLCcKcass/MFOKSTRWvgvtWtPoNmqLG7C5y
            4L7W8ewMGLyDMZRl3jez9b6yYviWNcjb84kPxWBRaqJT48YA6B3k2iYnIySmeKM=
            =zCtj
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
---
apiVersion: traefik.io/v1alpha1
kind: TraefikService
metadata:
    annotations:
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
    name: minio
spec:
    weighted:
        services:
            - name: minio
              port: 9000
              weight: 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-06-28T13:16:14Z"
    mac: ENC[AES256_GCM,data:9F6kyDm+ipS8NNf1WdkYjMWo5akFWl0mJGCyGweDcPtkIQUdoqbDuyA42pxaNLsl4mHM3pgbVxMjL8vLTwphpYlKTTdSMT8s5BcoRbTI1HySRC8uZGWho4ala/QIfMWF5GRVvSdvEH1JYzhrQzHlwmap9QRbsXzcGsPpCrUFby8=,iv:Atn9gu85/5G55xv7Rho/n+bpNBh/2t2YGSzz4keLmSg=,tag:jZ/1AEM5QNPD2v6WromIFQ==,type:str]
    pgp:
        - created_at: "2024-06-28T12:46:44Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ//b4oOBTaNEnILvXbepcJzBrmmbWsb1ofPgOsDy7Mp9ZYR
            ID56djlKFloB1KObhnGWHQosa/kY+bTzGZR+mR6cmmQwtIuY+Jhz/y+v9vDS+dOM
            due4FTHsQeVd0xRrOn/sAb268sHFzYByv4eUnK5PBNJqZV6redOZ0ilJMdU3BKEG
            MZ+5QuR4jqkfJ5F0b8P1BzKiIfw6qsuPeNPOV2zW2nWyZTlStnrvZ4KJUvqjXbdV
            /209/mTH2YE6S4fUWXX/NKJ8Siln98tXDIBcovdjFnhlq/z3bft+xHVs5LCEvHYe
            aSWWeU+7nv+iCuv56E/T73p5w3JgcgwlmoShXSok4Y6c32DimhiJYorkYAbUn4+H
            mO6FmXjDxPLd4Kee2+rheBiyKwlk4seILYGpztpG+72SmHXrr2DXF+qQpicr9Oml
            dZ/lv1GqDExcqjGDTQ+fHsUbPJQtHYRoHb011HFy3WmzvK+ZcFQOu3XvmABzl7Gy
            ngJILjWh+bbCgpiDxcWqN7ne1zjvtM7IYRirdGO/t30N5t9lEWKhqhW2ZEfEm+Xq
            FagSGeJmKNfvfefSOJbyh3CDVUsApEleXMrpL7Z16VlxMH1ZlLhWiflRfwB5we9O
            NC+nQ5fdAySEOpkjgYd3HqP6GFxaOkNotWVs3wUcJx7v282+bbfyucs0eKOQNt3S
            XgFpeEgWNSBGBwi7vMcHJvoabDXYkLLCcKcass/MFOKSTRWvgvtWtPoNmqLG7C5y
            4L7W8ewMGLyDMZRl3jez9b6yYviWNcjb84kPxWBRaqJT48YA6B3k2iYnIySmeKM=
            =zCtj
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
