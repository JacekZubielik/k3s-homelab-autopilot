apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/compare-options: IgnoreExtraneous
        argocd.argoproj.io/sync-wave: "10"
        cert-manager.io/cluster-issuer: route53-letsencrypt-production
        external-dns.alpha.kubernetes.io/target: ENC[AES256_GCM,data:Sx6zbVlhufo4X7LK7quwHP6odrFE4bQfhw==,iv:ErwPhkzSYnlK+JoHyuSy/O6REVZVaKRIC+oezULp45A=,tag:vCRtTLV+GG2Iksn+Anm53Q==,type:str]
        kubernetes.io/ingress.class: traefik-external
    name: authentik
    namespace: authentik
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:I6SqaPT0clONDJyVir6Vkv2XrBzTXF80ak77bkjCF9OMGA9S3g==,iv:kVzSoIuRLo+bDVLzIU2P/8yMzdQlLvTNWUVRJpnfGmI=,tag:SE+E57iFTp+GQO96miqZqw==,type:str]
          middlewares:
            - name: rate-limit
              namespace: traefik
          services:
            - kind: TraefikService
              name: authentik-server
              port: 443
    tls:
        domains:
            - main: ENC[AES256_GCM,data:u2qfYcUVlS7GJWifiubaQayzfTsUktOT1A==,iv:rys03FjCO5YFzsomsItAgXXrYLuo/dXcel8PHkA+EUo=,tag:1MAKEdjTdJf9teXBTHuMFQ==,type:str]
              sans:
                - ENC[AES256_GCM,data:i46A307CIuzNpGbyKzZSDDZOfYoBIkYAQp8=,iv:kLPHGbiXmGe5m8JrI5EArZSpTMuZKsQD49hFc+Nrvvo=,tag:szLJc0LgY++BuZyLB6x8cw==,type:str]
        options:
            name: tls-ver13
            namespace: traefik
        secretName: authentik-cf-production
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-06-30T14:07:39Z"
    mac: ENC[AES256_GCM,data:5p3sxFwqBawclsd35srb2RvgTZLwW6xYoiH+LbK3UxX7s/BD9kGcdqw13QIz3271eZOuJ1SrqcoPqghWtiZXxFUgcyLJAqBSRuluGOa+sEP8Nhl19GNZ7tHA/3tw7vr/TEcPw7q2Nde0X69drwHDr8kPUAmdLGZda0dFIC4b7Ok=,iv:r7nzJD+Jy8fGYJLBsYtYCLibcx/vjd3ZlP+jL3uzFqk=,tag:hmvqjZl1zgsjeUQ9CqLGWQ==,type:str]
    pgp:
        - created_at: "2024-06-30T14:07:39Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ/+M50oRrOZLORrfBv9Pw7Zczrmky0cPry8r6fSzKkFebip
            8PO3XcxdfoGl1UMrpeOPsMN3fWZeNGRmnoZmb2Yw5P7rTfNZ355x04+W+/ZreZyB
            jIyK4yAeDegbSNzhhk44yK7k7gFRXDnnUCJsShPOwkgkHyJRwW10imhC+dOeplZ8
            cJ4P3FP5MeLwA0az1ZoIRPHFexYlpeFLsXEMvKkWVfV9erHE8F1zAYKzjND4K4Qm
            wrgEbFl/jGaBao8sd3UOUyRRujupUXKedJ6MLdZ/IVDQokWrNUgr50ZnpTFf5kff
            0qijTAb2lAxpzx/+NpcGAGeplpF9AqeWW8+DbhEm5VrQIKeaRN8QfStRZpiriCQF
            fJ1APBeOty3whWlp6++PpJj9RCfJalcXa5TXH5ZhwwfnfvuZZEqhfLJgrgqxxo3U
            2GH36CFdZ9mvBbjLaGD0HMvwVsRi9nrZrBC8jj6Os3NkSifH0H3L964LyotEh24i
            XYTNP392aFE+/VeD4YLTWd5mJUu4eUd1dBjF2dxH30LyAwaqCKwSj79aKFV/OtsU
            y/idGP+A24Jnm8m0k/ZFOAWpyHlkApXaAjQ6hbbCLtHCRehpXbmfp8bG4dsmzg1p
            h3s8dlTL1q7wYpt1RWneGZN0ds1xlMyLQ2AkOzCCu/x7z7yBOr4jx344Iw351eTS
            XAH0OkAUelU8/jDJ+zUAMgOBx4MY5pTYMOu+79LTMBkPCeonHZgx+WWy4eg9/1Xz
            0j8VsVjDus8w57KTC1lNrL3b7e0HK0V/90TR6gwByrFsI+kw65z8+Jismd7Q
            =VjVx
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
---
apiVersion: traefik.io/v1alpha1
kind: TraefikService
metadata:
    annotations:
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
        argocd.argoproj.io/sync-wave: "10"
    name: authentik-server
spec:
    weighted:
        services:
            - name: authentik-server
              port: 443
              weight: 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-06-30T14:07:39Z"
    mac: ENC[AES256_GCM,data:5p3sxFwqBawclsd35srb2RvgTZLwW6xYoiH+LbK3UxX7s/BD9kGcdqw13QIz3271eZOuJ1SrqcoPqghWtiZXxFUgcyLJAqBSRuluGOa+sEP8Nhl19GNZ7tHA/3tw7vr/TEcPw7q2Nde0X69drwHDr8kPUAmdLGZda0dFIC4b7Ok=,iv:r7nzJD+Jy8fGYJLBsYtYCLibcx/vjd3ZlP+jL3uzFqk=,tag:hmvqjZl1zgsjeUQ9CqLGWQ==,type:str]
    pgp:
        - created_at: "2024-06-30T14:07:39Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ/+M50oRrOZLORrfBv9Pw7Zczrmky0cPry8r6fSzKkFebip
            8PO3XcxdfoGl1UMrpeOPsMN3fWZeNGRmnoZmb2Yw5P7rTfNZ355x04+W+/ZreZyB
            jIyK4yAeDegbSNzhhk44yK7k7gFRXDnnUCJsShPOwkgkHyJRwW10imhC+dOeplZ8
            cJ4P3FP5MeLwA0az1ZoIRPHFexYlpeFLsXEMvKkWVfV9erHE8F1zAYKzjND4K4Qm
            wrgEbFl/jGaBao8sd3UOUyRRujupUXKedJ6MLdZ/IVDQokWrNUgr50ZnpTFf5kff
            0qijTAb2lAxpzx/+NpcGAGeplpF9AqeWW8+DbhEm5VrQIKeaRN8QfStRZpiriCQF
            fJ1APBeOty3whWlp6++PpJj9RCfJalcXa5TXH5ZhwwfnfvuZZEqhfLJgrgqxxo3U
            2GH36CFdZ9mvBbjLaGD0HMvwVsRi9nrZrBC8jj6Os3NkSifH0H3L964LyotEh24i
            XYTNP392aFE+/VeD4YLTWd5mJUu4eUd1dBjF2dxH30LyAwaqCKwSj79aKFV/OtsU
            y/idGP+A24Jnm8m0k/ZFOAWpyHlkApXaAjQ6hbbCLtHCRehpXbmfp8bG4dsmzg1p
            h3s8dlTL1q7wYpt1RWneGZN0ds1xlMyLQ2AkOzCCu/x7z7yBOr4jx344Iw351eTS
            XAH0OkAUelU8/jDJ+zUAMgOBx4MY5pTYMOu+79LTMBkPCeonHZgx+WWy4eg9/1Xz
            0j8VsVjDus8w57KTC1lNrL3b7e0HK0V/90TR6gwByrFsI+kw65z8+Jismd7Q
            =VjVx
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(externalName|external-dns.alpha.kubernetes.io/hostname|sans|main|match|external-dns.alpha.kubernetes.io/target|dnsNames|commonName|data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.8.1
